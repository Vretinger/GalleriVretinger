{% extends "base.html" %}
{% load static %}

{% block content %}

<!-- Hero Section -->
<section class="event-hero position-relative text-white" 
        style="background-color:#475160;">
  <div class="overlay bg-dark bg-opacity-50 py-5">
    <div class="container text-center">
      <h1 class="display-4 fw-bold">{{ event.title }}</h1>
      {% if event.days.exists %}
      <p class="lead">
        {% for day in event.days.all %}
          {{ day.date|date:"M d, Y" }} | {{ day.start_time|time:"H:i" }} – {{ day.end_time|time:"H:i" }}<br>
        {% endfor %}
      </p>
      {% endif %}
    </div>
  </div>
</section>

<!-- Event Details Section -->
<section class="event-details py-5">
  <div class="container">
    <div class="row g-5">

      <!-- Left Column: Host Portrait + Event Images -->
      <div class="col-md-5">
        <!-- Host Portrait -->
        <div class="host-portrait mb-4">
          <img src="{{ event.potrait_image.url }}" alt="{{ event.host.get_full_name }}" class="img-fluid rounded shadow">
          <p class="mt-2 text-center fw-bold">{{ event.host.get_full_name }}</p>
        </div>

        <!-- Event Images -->
        {% if event.images.exists %}
        <div class="event-images">
          {% for img in event.images.all %}
          <div class="mb-3">
            <img src="{{ img.image.url }}" alt="{{ event.title }}" class="img-fluid rounded shadow-sm">
          </div>
          {% endfor %}
        </div>
        {% endif %}
      </div>

      <!-- Right Column: Info & Description -->
      <div class="col-md-7">
        <h2 class="fw-bold">{{ event.title }}</h2>

        <p class="text-muted">{{ event.Full_description }}</p>

        {% if not event.is_drop_in %}
          <a href="{% url 'book_event' event.id %}" class="btn btn-primary mb-4">Book a Spot</a>
        {% else %}
          <p class="text-success fw-bold">Drop-in Event — No sign-up needed!</p>
        {% endif %}

        <!-- Gallery Showcase Section -->
        {% if event.is_gallery_event and event.gallery_items.exists %}
        <h3 class="mt-5 fw-bold">Gallery Showcase</h3>
        <div class="row g-3 mt-3">
          {% for item in event.gallery_items.all %}
          <div class="col-6 col-md-4">
            <div class="card h-100 shadow-sm">
              <img src="{{ item.image.url }}" class="card-img-top" alt="{{ item.title }}">
              <div class="card-body">
                <h5 class="card-title">{{ item.title }}</h5>
                <p class="card-text text-muted">{{ item.price }} SEK</p>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
        {% endif %}

      </div>
    </div>
  </div>
</section>

{% endblock %}
