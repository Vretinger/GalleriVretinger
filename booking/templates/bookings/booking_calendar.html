{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block content %}
<!DOCTYPE html>
<html>
<head>
  <link href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    #stage2 {
      opacity: 0.5;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    #stage2.active {
      opacity: 1;
      pointer-events: all;
    }
    #preview-images img {
      max-width: 150px;
      margin-bottom: 8px;
      border-radius: 4px;
    }
  </style>
</head>
<body class="container py-4">

<h2>Step 1: Select Rental Period</h2>
<input id="rental-range" class="form-control mb-3" placeholder="Select rental start and end">

<!-- Hidden inputs -->
<input type="hidden" id="rental_start" name="rental_start">
<input type="hidden" id="rental_end" name="rental_end">

<div id="stage2">
  <h2>Step 2: Select Event Details</h2>
  <input id="event-days" class="form-control mb-2" placeholder="Select event days">
  <div class="row mb-3">
    <div class="col">
      <input id="event-start-time" class="form-control" type="time" placeholder="Start time">
    </div>
    <div class="col">
      <input id="event-end-time" class="form-control" type="time" placeholder="End time">
    </div>
  </div>

  <input type="text" id="event-title" class="form-control mb-2" placeholder="Event title">
  <textarea id="event-description" class="form-control mb-2" placeholder="Event description"></textarea>
  <input type="file" id="event-image1" class="form-control mb-2" required>
  <div id="extra-images-container"></div>
  <button type="button" id="addImageBtn" class="btn btn-secondary mb-3">+ Add another image</button>
  <button id="finishBtn" class="btn btn-primary" disabled>Submit Booking</button>

  <hr>
  <h3>Event Homepage Preview</h3>
<div id="event-preview" class="border rounded p-3 mb-4" style="overflow:auto; min-height:300px; position:relative;">
  
  <!-- Background -->
  <div id="preview-background" style="position:absolute; top:0; left:0; right:0; bottom:0; background:#f5f5f5; z-index:0; background-size:cover; background-position:center;"></div>
  
  <!-- Overlay Content -->
  <div class="overlay-content container text-center" style="position:relative; z-index:1;">
    <h1 id="preview-title">Event Title</h1>
    <p id="preview-description">Event description will appear here.</p>
    <p id="preview-times" class="text-muted">Event times: Not set</p>
  </div>

  <!-- Artwork Grid -->
  <div class="artwork-grid container d-flex flex-wrap justify-content-center" style="position:relative; z-index:1; gap:10px;">
    <div id="preview-images" class="d-flex flex-wrap justify-content-center gap-2">
      <!-- Uploaded images appear here -->
    </div>
  </div>
</div>

<!-- Inputs for Background -->
<div class="row mb-4">
  <div class="col-md-6">
    <label class="form-label">Background Color</label>
    <input type="color" id="background-color-picker" class="form-control form-control-color" value="#f5f5f5">
  </div>
  <div class="col-md-6">
    <label class="form-label">Background Image</label>
    <input type="file" id="background-image-picker" class="form-control">
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="{% static 'js/booking_combined.js' %}"></script>
</body>
</html>
{% endblock %}